#!/usr/bin/env python3

import sys
import os
from pathlib import Path

BIN_DIR = Path(__file__).resolve().parent
MODULES_DIR = BIN_DIR / "modules"
VENV_PYTHON = BIN_DIR.parent / "opt" / "venv" / "bin" / "python"
MIGRATE_SCRIPT = MODULES_DIR / "migrate.py"

if not VENV_PYTHON.exists():
    sys.stderr.write("‚ùå Virtual environment not found. Please run bin/install first.\n")
    sys.exit(1)

args = [str(VENV_PYTHON), str(MIGRATE_SCRIPT)] + sys.argv[1:]

os.execv(str(VENV_PYTHON), args)
